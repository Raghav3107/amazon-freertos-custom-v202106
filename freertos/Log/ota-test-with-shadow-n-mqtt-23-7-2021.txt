

.........prvMqttDefaultCallback::1007 
.........prvMqttJobCallback::975 
.........prvOtaEventBufferGet::830 
.........prvMqttDefaultCallback::1007 
275 17295 [MQTT Agent] [core_mqtt.c:886] [INFO] [MQTT] Packet received. ReceivedBytes=545.

276 17295 [MQTT Agent] [core_mqtt.c:1045] [INFO] [MQTT] De-serialized incoming PUBLISH packet: DeserializerResult=MQTTSuccess.

277 17295 [MQTT Agent] [core_mqtt.c:1058] [INFO] [MQTT] State record updated. New state=MQTTPubAckSend.

278 17295 [MQTT Agent] [ota_over_mqtt_task.c:982] [INFO] [MQTT] Received job message callback, size 498.



279 17299 [OTA Agent Task] [ota.c:1645] [INFO] [OTA] Extracted parameter: [key: value]=[execution.jobId: AFR_OTA-ota-new-repo]

280 17301 [OTA Agent Task] [ota.c:1645] [INFO] [OTA] Extracted parameter: [key: value]=[execution.jobDocument.afr_ota.streamname: AFR_OTA-74a209ae-4ae7-42dd-abdd-48206008d0e3]

281 17303 [OTA Agent Task] [ota.c:1645] [INFO] [OTA] Extracted parameter: [key: value]=[execution.jobDocument.afr_ota.protocols: ["MQTT"]]

282 17304 [OTA Agent Task] [ota.c:1645] [INFO] [OTA] Extracted parameter: [key: value]=[filepath: /device/updates]

283 17305 [OTA Agent Task] [ota.c:1684] [INFO] [OTA] Extracted parameter: [key: value]=[filesize: 1166288]

284 17306 [OTA Agent Task] [ota.c:1684] [INFO] [OTA] Extracted parameter: [key: value]=[fileid: 0]

285 17307 [OTA Agent Task] [ota.c:1645] [INFO] [OTA] Extracted parameter: [key: value]=[certfile: certs/device]

286 17308 [OTA Agent Task] [ota.c:1575] [INFO] [OTA] Extracted parameter [ sig-sha256-ecdsa: MEUCIQCbx0ENMz6MTv0k8eVwfKVe0o9b... ]

287 17309 [OTA Agent Task] [ota.c:2199] [INFO] [OTA] Job document was accepted. Attempting to begin the update.

288 17310 [OTA Agent Task] [ota.c:2323] [INFO] [OTA] Job parsing success: OtaJobParseErr_t=OtaJobParseErrNone, Job name=AFR_OTA-ota-new-repo

.........prvOtaAppCallback::860 
289 17311 [OTA Agent Task] [ota_pal.c:612] [INFO] [OTA] otaPal_GetPlatformImageState

I (173864) esp_ota_ops: aws_esp_ota_get_boot_flags: 1
I (173874) esp_ota_ops: [0] aflags/seq:0x2/0x1, pflags/seq:0xffffffff/0x0
290 17313 [OTA Agent Task] [ota_pal.c:210] [INFO] [OTA] Writing to partition subtype 17 at offset 0x1a0000

291 17373 [OTA-Task] [ota_over_mqtt_task.c:1875] [INFO] [MQTT]  Received: 0   Queued: 0   Processed: 0   Dropped: 0

292 17480 [OTA-Task] [ota_over_mqtt_task.c:1875] [INFO] [MQTT]  Received: 0   Queued: 0   Processed: 0   Dropped: 0

293 17597 [OTA-Task] [ota_over_mqtt_task.c:1875] [INFO] [MQTT]  Received: 0   Queued: 0   Processed: 0   Dropped: 0

294 17709 [OTA-Task] [ota_over_mqtt_task.c:1875] [INFO] [MQTT]  Received: 0   Queued: 0   Processed: 0   Dropped: 0

295 17774 [OTA Agent Task] [ota_pal.c:229] [INFO] [OTA] esp_ota_begin succeeded

296 17774 [OTA Agent Task] [ota_pal.c:612] [INFO] [OTA] otaPal_GetPlatformImageState

I (178494) esp_ota_ops: aws_esp_ota_get_boot_flags: 1
I (178494) esp_ota_ops: [0] aflags/seq:0x2/0x1, pflags/seq:0xffffffff/0x0
297 17775 [OTA Agent Task] [ota.c:938] [INFO] [OTA] Setting OTA data interface.

.........prvOtaAppCallback::860 
prvOtaEventBufferFree......... 814 
298 17777 [OTA Agent Task] [ota.c:2839] [INFO] [OTA] Current State=[CreatingFile], Event=[ReceivedJobDocument], New state=[CreatingFile]

.........prvMqttSubscribe::1477 
299 17809 [OTA-Task] [ota_over_mqtt_task.c:1875] [INFO] [MQTT]  Received: 0   Queued: 0   Processed: 0   Dropped: 0

.........prvMQTTSubscribeCompleteCallback::1120 
300 17880 [MQTT Agent] [core_mqtt.c:886] [INFO] [MQTT] Packet received. ReceivedBytes=3.

301 17880 [OTA Agent Task] [ota_over_mqtt_task.c:1521] [INFO] [MQTT] SUBSCRIBED to topic $aws/things/rgv_newAWStest/streams/AFR_OTA-74a209ae-4ae7-42dd-abdd-48206008d0e3/data/cbor to broker.

302 17883 [OTA Agent Task] [ota.c:2839] [INFO] [OTA] Current State=[RequestingFileBlock], Event=[CreateFile], New state=[RequestingFileBlock]

.........prvMqttPublish::1534 
.........prvMQTTAgentCmdCompleteCallback::1059 
303 17885 [MQTT Agent] [core_mqtt_agent_command_functions.c:76] [INFO] [MQTT] Publishing message to $aws/things/rgv_newAWStest/streams/AFR_OTA-74a209ae-4ae7-42dd-abdd-48206008d0e3/get/cbor.
304 17887 [OTA Agent Task] [ota_over_mqtt_task.c:1572] [INFO] [MQTT] Sent PUBLISH packet to broker $aws/things/rgv_newAWStest/streams/AFR_OTA-74a209ae-4ae7-42dd-abdd-48206008d0e3/get/cbor to 305 17888 [OTA Agent Task] [ota_mqtt.c:1112] [INFO] [OTA] Published to MQTT topic to request the next block: topic=$aws/things/rgv_newAWStest/streams/AFR_OTA-74a209ae-4ae7-42dd-abdd-48206008d306 17889 [OTA Agent Task] [ota.c:2839] [INFO] [OTA] Current State=[WaitingForFileBlock], Event=[RequestFileBlock], New state=[WaitingForFileBlock]













3842 50861 [MQTT Agent] [core_mqtt.c:886] [INFO] [MQTT] Packet received. ReceivedBytes=2.

3843 50861 [MQTT Agent] [ota_over_mqtt_task.c:1162] [INFO] [MQTT] Removed registration for topic $aws/things/rgv_newAWStest/streams/AFR_OTA-74a209ae-4ae7-42dd-abdd-48206008d0e3/data/cbor.

3844 50867 [OTA Agent Task] [ota_over_mqtt_task.c:1623] [INFO] [MQTT] Unsubscribed from topic $aws/things/rgv_newAWStest/streams/AFR_OTA-74a209ae-4ae7-42dd-abdd-48206008d0e3/data/cbor to brok3845 50868 [OTA Agent Task] [ota_mqtt.c:442] [INFO] [OTA] Unsubscribed to MQTT topic: $aws/things/rgv_newAWStest/streams/AFR_OTA-74a209ae-4ae7-42dd-abdd-48206008d0e3/data/cbor

3846 50871 [OTA Agent Task] [ota.c:2839] [INFO] [OTA] Current State=[WaitingForJob], Event=[CloseFile], New state=[WaitingForJob]

3847 50872 [OTA-Task] [ota_over_mqtt_task.c:1875] [INFO] [MQTT]  Received: 285   Queued: 285   Processed: 284   Dropped: 0

3848 50872 [OTA Agent Task] [ota.c:1738] [INFO] [OTA] Failed job document content check: Required job document parameter was not extracted: parameter=execution

3849 50874 [OTA Agent Task] [ota.c:1738] [INFO] [OTA] Failed job document content check: Required job document parameter was not extracted: parameter=execution.jobId

3850 50875 [OTA Agent Task] [ota.c:1738] [INFO] [OTA] Failed job document content check: Required job document parameter was not extracted: parameter=execution.jobDocument

3851 50878 [OTA Agent Task] [ota.c:1738] [INFO] [OTA] Failed job document content check: Required job document parameter was not extracted: parameter=execution.jobDocument.afr_ota

3852 50879 [OTA Agent Task] [ota.c:1738] [INFO] [OTA] Failed job document content check: Required job document parameter was not extracted: parameter=execution.jobDocument.afr_ota.protocols
3853 50881 [OTA Agent Task] [ota.c:1738] [INFO] [OTA] Failed job document content check: Required job document parameter was not extracted: parameter=execution.jobDocument.afr_ota.files

3854 50883 [OTA Agent Task] [ota.c:1738] [INFO] [OTA] Failed job document content check: Required job document parameter was not extracted: parameter=filesize

3855 50884 [OTA Agent Task] [ota.c:1738] [INFO] [OTA] Failed job document content check: Required job document parameter was not extracted: parameter=fileid

3856 50886 [OTA Agent Task] [ota.c:1823] [INFO] [OTA] Failed to parse JSON document as AFR_OTA job: DocParseErr_t=7

3857 50886 [OTA Agent Task] [ota.c:2240] [INFO] [OTA] No active job available in received job document: OtaJobParseErr_t=OtaJobParseErrNoActiveJobs

.........prvOtaAppCallback::860 
prvOtaEventBufferFree......... 814 
3858 50888 [OTA Agent Task] [ota.c:2831] [ERROR] [OTA] Failed to execute state transition handler: Handler returned error: OtaErr_t=OtaErrJobParserError

3859 50890 [OTA Agent Task] [ota.c:2839] [INFO] [OTA] Current State=[WaitingForJob], Event=[ReceivedJobDocument], New state=[CreatingFile]

